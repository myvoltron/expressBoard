# expressBoard
SNS 바로가기 - http://13.124.131.232/post

### 요구사항

- 게시글 목록보기, 상세보기, 업로드, 수정, 삭제
    - 목록보기를 할 때 글의 생성일 기준으로 내림차순으로 보여줘야함
    - 게시글 업로드할 때 파일(이미지 등)을 업로드할 수 있어야함
        - multer를 이용해 파일필터로 이미지만 올릴 수 있게 함
    - 로그인
        - 삭제와 수정이 바로 가능하다.
        - 로그인 유저가 쓴 글에는 글쓴이에 익명표시가 없어지고 로그인 유저정보 바로가기가 생김
    - 비로그인
        - 비밀번호를 통해서 삭제와 수정이 가능하다.
        - 글쓴이 이름은 익명으로 통일된다.
- 댓글 쓰기, 삭제, 목록보기
    - 댓글 목록
        - 댓글 개수를 출력해야함 → 괄호 안에 개수를 표현하자
        - 비회원의 댓글은 익명, 비밀번호 입력 칸, 삭제버튼, 댓글 내용 출력
        - 회원의 댓글은 회원의 이름(회원정보로 바로가기), 댓글 내용 출력, 삭제 버튼 출력
    - 댓글 삭제는 둘 다 가능하지만 로직이 다르다.
    - 로그인한 경우 댓글의 writer_id와 비교해서 맞아떨어지면 바로 삭제 가능
        - 현재 로그인 중인 회원과 댓글의 회원 데이터가 일치하면 삭제버튼을 보여준다.
    - 비로그인의 경우 댓글의 password를 비교해서 맞아떨어지면 바로 삭제 가능
        - 로그인한 경우에는 댓글의 password 입력부분을 안보여주게 함
        - 비로그인의 경우에는 댓글 목록의 삭제버튼 옆 그리고 댓글 쓰기 위쪽에 비밀번호 입력창을 보여준다.
- 회원 기능
    - 비밀번호는 bcrypt를 사용해서 암호화 저장
    - 수정, 삭제는 로그인 중인 해당 회원만 이용할 수 있다.
    - 회원 상세보기는 누구나 열람할 수 있다.
        - 해당 회원 정보 등
        - 해당 회원이 좋아요한 글 목록
        - 해당 회원이 팔로우한 회원 목록(x)
- 로그인, 로그아웃 등
    - 전통적인 로그인
    - OAuth(구글 로그인)
    - Session 으로 로그인 상태 유지
- 좋아요 기능
    - 회원만 가능
- 팔로우 기능
    - 회원만 가능
- 팝업창
    - 로그인 여부
    - 글, 댓글, 회원, 팔로우, 좋아요 CRUD 할때마다 팝업창
    - 이미지가 아닌 다른 파일을 올렸을 땐 글쓰기창으로 보내면서 이미지만 올리라는 팝업창
- 검색 기능
    - post 검색
    - user 검색

### 사용기술
- Express, MySQL, ejs
- Boot Strap
- Amazon Lightsail instances, Amazon Lightsail Databases
- Visual Studio Code


### DB 설계
![SNS_DB설계도2](https://user-images.githubusercontent.com/72268581/158025058-bd77dd4a-2ac6-4a25-9a32-9f05e5020824.PNG)

### URL 설계 
![SNS_URL설계](https://user-images.githubusercontent.com/72268581/158025102-c7f76c44-31ce-4340-9532-fae259d13986.PNG)

### 느낀 점

- DB와 연결할 땐 mysql 모듈을 사용했다. 사용하다보니 query 함수안에 query함수를 넣는 구조가 많았는데 이게 콜백 지옥이고 가독성도 떨어지고 사용하기 불편해지는 것 같다. 다음엔 promise를 접목하거나 아예 ORM을 배워야겠다.
- ejs도 잘 쓰고 있지만 생각보다 파일 규모가 커지는 것 같고 관리하기가 힘들어진다. 다음엔 아예 react같은 프론트엔드 프레임워크를 배워야겠다.
- 시간이 없어서 못했던 대댓글 기능을 추가하고싶다.
- 회원의 수정, 삭제를 할 때 비밀번호를 입력하게해서 기능을 사용할 수 있게 하고싶다.
    - 하지만 OAuth2를 사용해서 로그인한 회원의 경우에는 password가 없다.
    - 그래서 아예 처음에 DB를 설계할 때 회원 테이블에서 provider라는 컬럼을 만들어서 local 방식으로 만든 회원, google 방식으로 만든 회원 이렇게 구분할 수 있어야했었다.

